<html>
<head>
    <title>ytCoop</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.2.0/css/bootstrap.min.css"
      th:href="@{/webjars/bootstrap/3.2.0/css/bootstrap.min.css}"
      rel="stylesheet" media="screen" />
    <link th:href="@{/style/room.css}" rel="stylesheet" media="screen" />
</head>
<body>
<!-- <h1><span th:text="${room.name}">NAME</span></h1> -->
<!-- <p th:if="${isHost}">You are host</p> -->

<div id="container">
	<div id="overlay">
	    <div id="player" th:attr="data-video-id=${room.video.videoId}, data-room-id=${room.id}" ></div>
	</div>
	
	<div id="participants">
	    <p class="participant" th:each="p : ${room.participants}" th:attr="data-user-id=${p.userId}">
	        <img th:src="${p.imageUrl}" /> <span th:text="${p.displayName}">participant</span>
	    </p>
	</div>
	
	<div id="controls">
	    <input placeholder="bullet text" id="bullettext"/><button id="sendBullet">send bullet</button>
	</div>
</div>



<script th:src="@{/webjars/jquery/2.1.1/jquery.min.js}"></script>
<script th:src="@{/webjars/sockjs-client/0.3.4/sockjs.js}"></script>
<script th:src="@{/webjars/stomp-websocket/2.3.3/stomp.min.js}"></script>
<script th:src="@{/js/room/youtube-player.js}"></script>
<script th:src="@{/js/room/websocket-client.js}"></script>
<script th:src="@{/js/room/room.js}"></script>

<script th:if="${isHost}">
$(document).ready(function(){
    var room = new Room('player', 'overlay', 'participants', true);
    $('#sendBullet').click(function(){
        var txt = $('#bullettext').val();
        room.sendBullet(txt);
        $("#bullettext").val('');
    })
    $("#bullettext").keyup(function(event){
        if(event.keyCode == 13){
            $("#sendBullet").click();
        }
    });
})
</script>
<script th:if="${isHost} == false">
$(document).ready(function(){
    var room = new Room('player', 'overlay', 'participants', false);
    $('#sendBullet').click(function(){
        var txt = $('#bullettext').val();
        room.sendBullet(txt);
        $("#bullettext").val('');
    })
    $("#bullettext").keyup(function(event){
        if(event.keyCode == 13){
            $("#sendBullet").click();
        }
    });
})
</script>
</body>
</html>